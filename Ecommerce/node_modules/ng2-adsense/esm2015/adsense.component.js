import { ChangeDetectionStrategy, Component, Inject, Input, ViewChild, ElementRef, PLATFORM_ID, } from '@angular/core';
import { isPlatformBrowser } from '@angular/common';
import { ADSENSE_TOKEN } from './adsense-config';
export class AdsenseComponent {
    constructor(config, 
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    platform) {
        this.config = config;
        this.platform = platform;
        /** can be manually set if you need all ads on a page to have same id page-xxx */
        this.adRegion = 'page-' + Math.floor(Math.random() * 10000) + 1;
        /**
         * classes applied to the ins element
         */
        this.className = '';
    }
    ngOnInit() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
        const config = this.config;
        this.adClient = (_a = this.adClient) !== null && _a !== void 0 ? _a : config.adClient;
        this.adSlot = (_b = this.adSlot) !== null && _b !== void 0 ? _b : config.adSlot;
        this.adFormat = (_d = (_c = this.adFormat) !== null && _c !== void 0 ? _c : config.adFormat) !== null && _d !== void 0 ? _d : 'auto';
        this.display = (_f = (_e = this.display) !== null && _e !== void 0 ? _e : config.display) !== null && _f !== void 0 ? _f : 'block';
        this.width = (_g = this.width) !== null && _g !== void 0 ? _g : config.width;
        this.height = (_h = this.height) !== null && _h !== void 0 ? _h : config.height;
        this.layout = (_j = this.layout) !== null && _j !== void 0 ? _j : config.layout;
        this.layoutKey = (_k = this.layoutKey) !== null && _k !== void 0 ? _k : config.layoutKey;
        this.pageLevelAds = (_l = this.pageLevelAds) !== null && _l !== void 0 ? _l : config.pageLevelAds;
        this.adtest = (_m = this.adtest) !== null && _m !== void 0 ? _m : config.adtest;
        this.fullWidthResponsive = (_o = this.fullWidthResponsive) !== null && _o !== void 0 ? _o : config.fullWidthResponsive;
    }
    ngOnDestroy() {
        const iframe = this.ins.nativeElement.querySelector('iframe');
        if (iframe && iframe.contentWindow) {
            iframe.src = 'about:blank';
            iframe.remove();
        }
    }
    ngAfterViewInit() {
        if (isPlatformBrowser(this.platform)) {
            this.push();
        }
    }
    push() {
        const p = {};
        if (this.pageLevelAds) {
            p.google_ad_client = this.adClient;
            p.enable_page_level_ads = true;
        }
        if (window) {
            try {
                // eslint-disable-next-line @typescript-eslint/no-explicit-any
                (window.adsbygoogle = window.adsbygoogle || []).push(p);
            }
            catch (_a) {
                // pass
            }
        }
    }
}
AdsenseComponent.decorators = [
    { type: Component, args: [{
                selector: 'ng2-adsense,ng-adsense',
                template: `
    <ins
      #ins
      class="adsbygoogle {{ className }}"
      [style.display]="display"
      [style.width.px]="width"
      [style.height.px]="height"
      [attr.data-ad-client]="adClient"
      [attr.data-ad-slot]="adSlot"
      [attr.data-ad-format]="adFormat"
      [attr.data-ad-region]="adRegion"
      [attr.data-layout]="layout"
      [attr.data-adtest]="adtest"
      [attr.data-layout-key]="layoutKey"
      [attr.data-full-width-responsive]="fullWidthResponsive"
    >
    </ins>
  `,
                changeDetection: ChangeDetectionStrategy.OnPush
            },] }
];
AdsenseComponent.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [ADSENSE_TOKEN,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }
];
AdsenseComponent.propDecorators = {
    adClient: [{ type: Input }],
    adSlot: [{ type: Input }],
    adFormat: [{ type: Input }],
    adRegion: [{ type: Input }],
    display: [{ type: Input }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    layout: [{ type: Input }],
    layoutKey: [{ type: Input }],
    pageLevelAds: [{ type: Input }],
    adtest: [{ type: Input }],
    fullWidthResponsive: [{ type: Input }],
    className: [{ type: Input }],
    ins: [{ type: ViewChild, args: ['ins', { read: ElementRef, static: true },] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRzZW5zZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbGliL2Fkc2Vuc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUNULE1BQU0sRUFDTixLQUFLLEVBR0wsU0FBUyxFQUNULFVBQVUsRUFDVixXQUFXLEdBQ1osTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFcEQsT0FBTyxFQUFFLGFBQWEsRUFBaUIsTUFBTSxrQkFBa0IsQ0FBQztBQXdCaEUsTUFBTSxPQUFPLGdCQUFnQjtJQThCM0IsWUFDaUMsTUFBcUI7SUFDcEQsOERBQThEO0lBQ2pDLFFBQWE7UUFGWCxXQUFNLEdBQU4sTUFBTSxDQUFlO1FBRXZCLGFBQVEsR0FBUixRQUFRLENBQUs7UUEzQjVDLGlGQUFpRjtRQUN4RSxhQUFRLEdBQUcsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQWlCcEU7O1dBRUc7UUFDTSxjQUFTLEdBQUcsRUFBRSxDQUFDO0lBT3JCLENBQUM7SUFFSixRQUFROztRQUNOLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDM0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFBLElBQUksQ0FBQyxRQUFRLG1DQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDakQsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFBLElBQUksQ0FBQyxNQUFNLG1DQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDM0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFBLE1BQUEsSUFBSSxDQUFDLFFBQVEsbUNBQUksTUFBTSxDQUFDLFFBQVEsbUNBQUksTUFBTSxDQUFDO1FBQzNELElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBQSxNQUFBLElBQUksQ0FBQyxPQUFPLG1DQUFJLE1BQU0sQ0FBQyxPQUFPLG1DQUFJLE9BQU8sQ0FBQztRQUN6RCxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQUEsSUFBSSxDQUFDLEtBQUssbUNBQUksTUFBTSxDQUFDLEtBQUssQ0FBQztRQUN4QyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQUEsSUFBSSxDQUFDLE1BQU0sbUNBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUMzQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQUEsSUFBSSxDQUFDLE1BQU0sbUNBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUMzQyxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQUEsSUFBSSxDQUFDLFNBQVMsbUNBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQztRQUNwRCxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQUEsSUFBSSxDQUFDLFlBQVksbUNBQUksTUFBTSxDQUFDLFlBQVksQ0FBQztRQUM3RCxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQUEsSUFBSSxDQUFDLE1BQU0sbUNBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUMzQyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsTUFBQSxJQUFJLENBQUMsbUJBQW1CLG1DQUFJLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQztJQUNwRixDQUFDO0lBQ0QsV0FBVztRQUNULE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5RCxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsYUFBYSxFQUFFO1lBQ2xDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsYUFBYSxDQUFDO1lBQzNCLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNqQjtJQUNILENBQUM7SUFFRCxlQUFlO1FBQ2IsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDcEMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2I7SUFDSCxDQUFDO0lBRUQsSUFBSTtRQUNGLE1BQU0sQ0FBQyxHQUFxQyxFQUFFLENBQUM7UUFDL0MsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3JCLENBQUMsQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ25DLENBQUMsQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUM7U0FDaEM7UUFFRCxJQUFJLE1BQU0sRUFBRTtZQUNWLElBQUk7Z0JBQ0YsOERBQThEO2dCQUM5RCxDQUFFLE1BQWMsQ0FBQyxXQUFXLEdBQUksTUFBYyxDQUFDLFdBQVcsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0U7WUFBQyxXQUFNO2dCQUNOLE9BQU87YUFDUjtTQUNGO0lBQ0gsQ0FBQzs7O1lBckdGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsd0JBQXdCO2dCQUNsQyxRQUFRLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBaUJUO2dCQUNELGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO2FBQ2hEOzs7NENBZ0NJLE1BQU0sU0FBQyxhQUFhOzRDQUVwQixNQUFNLFNBQUMsV0FBVzs7O3VCQS9CcEIsS0FBSztxQkFFTCxLQUFLO3VCQUNMLEtBQUs7dUJBRUwsS0FBSztzQkFFTCxLQUFLO29CQUVMLEtBQUs7cUJBRUwsS0FBSztxQkFFTCxLQUFLO3dCQUVMLEtBQUs7MkJBRUwsS0FBSztxQkFFTCxLQUFLO2tDQUVMLEtBQUs7d0JBSUwsS0FBSztrQkFDTCxTQUFTLFNBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG4gIFZpZXdDaGlsZCxcbiAgRWxlbWVudFJlZixcbiAgUExBVEZPUk1fSUQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5pbXBvcnQgeyBBRFNFTlNFX1RPS0VOLCBBZHNlbnNlQ29uZmlnIH0gZnJvbSAnLi9hZHNlbnNlLWNvbmZpZyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25nMi1hZHNlbnNlLG5nLWFkc2Vuc2UnLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxpbnNcbiAgICAgICNpbnNcbiAgICAgIGNsYXNzPVwiYWRzYnlnb29nbGUge3sgY2xhc3NOYW1lIH19XCJcbiAgICAgIFtzdHlsZS5kaXNwbGF5XT1cImRpc3BsYXlcIlxuICAgICAgW3N0eWxlLndpZHRoLnB4XT1cIndpZHRoXCJcbiAgICAgIFtzdHlsZS5oZWlnaHQucHhdPVwiaGVpZ2h0XCJcbiAgICAgIFthdHRyLmRhdGEtYWQtY2xpZW50XT1cImFkQ2xpZW50XCJcbiAgICAgIFthdHRyLmRhdGEtYWQtc2xvdF09XCJhZFNsb3RcIlxuICAgICAgW2F0dHIuZGF0YS1hZC1mb3JtYXRdPVwiYWRGb3JtYXRcIlxuICAgICAgW2F0dHIuZGF0YS1hZC1yZWdpb25dPVwiYWRSZWdpb25cIlxuICAgICAgW2F0dHIuZGF0YS1sYXlvdXRdPVwibGF5b3V0XCJcbiAgICAgIFthdHRyLmRhdGEtYWR0ZXN0XT1cImFkdGVzdFwiXG4gICAgICBbYXR0ci5kYXRhLWxheW91dC1rZXldPVwibGF5b3V0S2V5XCJcbiAgICAgIFthdHRyLmRhdGEtZnVsbC13aWR0aC1yZXNwb25zaXZlXT1cImZ1bGxXaWR0aFJlc3BvbnNpdmVcIlxuICAgID5cbiAgICA8L2lucz5cbiAgYCxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIEFkc2Vuc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG4gIC8qKiBhZHNlbnNlIGFjY291bnQgY2EtcHViLVhYWFhYWFhYWFhYWFhYWFggKi9cbiAgQElucHV0KCkgYWRDbGllbnQhOiBzdHJpbmc7XG4gIC8qKiBhZCBzbG90L251bWJlciAqL1xuICBASW5wdXQoKSBhZFNsb3QhOiBzdHJpbmcgfCBudW1iZXI7XG4gIEBJbnB1dCgpIGFkRm9ybWF0ITogc3RyaW5nO1xuICAvKiogY2FuIGJlIG1hbnVhbGx5IHNldCBpZiB5b3UgbmVlZCBhbGwgYWRzIG9uIGEgcGFnZSB0byBoYXZlIHNhbWUgaWQgcGFnZS14eHggKi9cbiAgQElucHV0KCkgYWRSZWdpb24gPSAncGFnZS0nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApICsgMTtcbiAgLyoqIGlucyBlbGVtZW50IGRpc3BsYXkgc3R5bGUgKi9cbiAgQElucHV0KCkgZGlzcGxheSE6IHN0cmluZztcbiAgLyoqIGlucyBlbGVtZW50IGhlaWdodCBpbiBweCAqL1xuICBASW5wdXQoKSB3aWR0aCE6IG51bWJlcjtcbiAgLyoqIGlucyBlbGVtZW50IHdpZHRoIGluIHB4ICovXG4gIEBJbnB1dCgpIGhlaWdodCE6IG51bWJlcjtcbiAgLyoqIHVzZWQgZm9yIGluLWZlZWQgYWRzICovXG4gIEBJbnB1dCgpIGxheW91dCE6IHN0cmluZztcbiAgLyoqIHVzZWQgZm9yIGluLWZlZWQgYWRzICovXG4gIEBJbnB1dCgpIGxheW91dEtleSE6IHN0cmluZztcbiAgLyoqIGVuYWJsZSBwYWdlLWxldmVsIGFkcyAqL1xuICBASW5wdXQoKSBwYWdlTGV2ZWxBZHMhOiBib29sZWFuO1xuICAvKiogc2V0cyB1cCBzb21lIHNvcnQgb2YgZ29vZ2xlIHRlc3QgYWQgKi9cbiAgQElucHV0KCkgYWR0ZXN0ITogc3RyaW5nO1xuICAvKiB1c2VkIGZvciBmbGV4aWJsZSBhZHMgKi9cbiAgQElucHV0KCkgZnVsbFdpZHRoUmVzcG9uc2l2ZSE6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBjbGFzc2VzIGFwcGxpZWQgdG8gdGhlIGlucyBlbGVtZW50XG4gICAqL1xuICBASW5wdXQoKSBjbGFzc05hbWUgPSAnJztcbiAgQFZpZXdDaGlsZCgnaW5zJywgeyByZWFkOiBFbGVtZW50UmVmLCBzdGF0aWM6IHRydWUgfSkgaW5zITogRWxlbWVudFJlZjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KEFEU0VOU0VfVE9LRU4pIHByaXZhdGUgY29uZmlnOiBBZHNlbnNlQ29uZmlnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybTogYW55LFxuICApIHt9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5jb25maWc7XG4gICAgdGhpcy5hZENsaWVudCA9IHRoaXMuYWRDbGllbnQgPz8gY29uZmlnLmFkQ2xpZW50O1xuICAgIHRoaXMuYWRTbG90ID0gdGhpcy5hZFNsb3QgPz8gY29uZmlnLmFkU2xvdDtcbiAgICB0aGlzLmFkRm9ybWF0ID0gdGhpcy5hZEZvcm1hdCA/PyBjb25maWcuYWRGb3JtYXQgPz8gJ2F1dG8nO1xuICAgIHRoaXMuZGlzcGxheSA9IHRoaXMuZGlzcGxheSA/PyBjb25maWcuZGlzcGxheSA/PyAnYmxvY2snO1xuICAgIHRoaXMud2lkdGggPSB0aGlzLndpZHRoID8/IGNvbmZpZy53aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuaGVpZ2h0ID8/IGNvbmZpZy5oZWlnaHQ7XG4gICAgdGhpcy5sYXlvdXQgPSB0aGlzLmxheW91dCA/PyBjb25maWcubGF5b3V0O1xuICAgIHRoaXMubGF5b3V0S2V5ID0gdGhpcy5sYXlvdXRLZXkgPz8gY29uZmlnLmxheW91dEtleTtcbiAgICB0aGlzLnBhZ2VMZXZlbEFkcyA9IHRoaXMucGFnZUxldmVsQWRzID8/IGNvbmZpZy5wYWdlTGV2ZWxBZHM7XG4gICAgdGhpcy5hZHRlc3QgPSB0aGlzLmFkdGVzdCA/PyBjb25maWcuYWR0ZXN0O1xuICAgIHRoaXMuZnVsbFdpZHRoUmVzcG9uc2l2ZSA9IHRoaXMuZnVsbFdpZHRoUmVzcG9uc2l2ZSA/PyBjb25maWcuZnVsbFdpZHRoUmVzcG9uc2l2ZTtcbiAgfVxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICBjb25zdCBpZnJhbWUgPSB0aGlzLmlucy5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZScpO1xuICAgIGlmIChpZnJhbWUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgIGlmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnO1xuICAgICAgaWZyYW1lLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICBpZiAoaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybSkpIHtcbiAgICAgIHRoaXMucHVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1c2goKTogdm9pZCB7XG4gICAgY29uc3QgcDogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj4gPSB7fTtcbiAgICBpZiAodGhpcy5wYWdlTGV2ZWxBZHMpIHtcbiAgICAgIHAuZ29vZ2xlX2FkX2NsaWVudCA9IHRoaXMuYWRDbGllbnQ7XG4gICAgICBwLmVuYWJsZV9wYWdlX2xldmVsX2FkcyA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHdpbmRvdykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgKCh3aW5kb3cgYXMgYW55KS5hZHNieWdvb2dsZSA9ICh3aW5kb3cgYXMgYW55KS5hZHNieWdvb2dsZSB8fCBbXSkucHVzaChwKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBwYXNzXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0=